<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FixGo & Finish | Inicio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-[#0a0a16] text-white">

    <!-- üîê HEADER / AUTH CONTROL -->
    <header class="p-6 flex justify-between items-center max-w-7xl mx-auto">
        <div class="text-2xl font-black tracking-tighter italic">FIXGO<span class="text-blue-500">&</span>FINISH</div>
        <div class="flex gap-4">
            <button id="btnLogin" class="text-gray-400 hover:text-white text-sm font-bold transition">Iniciar Sesi√≥n</button>
            <button id="btnLogout" class="hidden bg-red-500 hover:bg-red-600 px-6 py-2 rounded-full text-sm font-bold transition shadow-lg shadow-red-500/20">Cerrar Sesi√≥n</button>
        </div>
    </header>

    <main class="text-center py-20 px-6">
        <h1 class="text-5xl md:text-7xl font-black mb-6 gradient-text">Mantenimiento de √âlite.</h1>
        <p class="text-gray-400 text-lg md:text-xl max-w-2xl mx-auto mb-10">
            T√©cnicos certificados y procesos blindados en el Caribe Mexicano.
        </p>
        <div class="flex flex-col md:flex-row gap-4 justify-center">
            <button id="solicitarServicioBtn" class="bg-white text-black px-8 py-4 rounded-2xl font-bold text-lg hover:bg-gray-200 transition shadow-xl">
                üõ† Solicitar Servicio
            </button>
            <button onclick="alert('üìç Nuestra Cobertura actual: Canc√∫n y Chetumal.')" class="glass border border-white/10 px-8 py-4 rounded-2xl font-bold text-lg hover:bg-white/5 transition">
                üìç Ver Cobertura
            </button>
        </div>
    </main>

    <footer class="py-10 text-center text-gray-600 text-xs border-t border-white/5">
        ¬© 2026 FIXGO & FINISH | Quintana Roo, M√©xico.
    </footer>

    <!-- üîê AUTH + REDIRECCI√ìN -->
    <script type="module">
        import { app } from "./firebase-config.js";
        import { getAuth, onAuthStateChanged, signOut } from "./firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const auth = getAuth(app);
        const db = getFirestore(app);

        const btnLogin = document.getElementById("btnLogin");
        const btnLogout = document.getElementById("btnLogout");
        const solicitarBtn = document.getElementById("solicitarServicioBtn");

        // Mostrar/Ocultar botones seg√∫n estado de sesi√≥n
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                btnLogin.classList.add("hidden");
                btnLogout.classList.remove("hidden");

                // Optional: mostrar nombre o rol si quieres
                const docRefs = [
                    { col: "admins", home: "admin.html" },
                    { col: "tecnicos", home: "tecnico.html" },
                    { col: "clientes", home: "index.html" }
                ];

                // Si ya est√° logueado, bot√≥n de solicitud puede redirigir a perfil/√°rea espec√≠fica
                solicitarBtn.onclick = async () => {
                    for (const info of docRefs) {
                        const snap = await getDoc(doc(db, info.col, user.uid));
                        if (snap.exists()) {
                            return window.location.href = info.home;
                        }
                    }
                    alert("‚ö†Ô∏è A√∫n no tienes rol asignado.");
                };

            } else {
                btnLogin.classList.remove("hidden");
                btnLogout.classList.add("hidden");
                solicitarBtn.onclick = () => window.location.href = "login.html";
            }
        });

        // Login button
        btnLogin.onclick = () => {
            window.location.href = "login.html";
        };

        // Logout button
        btnLogout.onclick = async () => {
            await signOut(auth);
            window.location.href = "login.html";
        };
    </script>

</body>
</html>

